<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HNFAK | NEXT GEN</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root { --red: #ff0000; --bg: #050505; --surface: rgba(255,255,255,0.05); --neon: 0 0 15px rgba(255,0,0,0.5); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            margin: 0; background: var(--bg); color: #fff; 
            font-family: 'Plus Jakarta Sans', sans-serif; overflow-x: hidden;
        }

        /* --- Sƒ∞NETMATƒ∞K EFEKTLER --- */
        .glow-orb { position: fixed; width: 300px; height: 300px; background: radial-gradient(circle, rgba(255,0,0,0.1) 0%, transparent 70%); z-index: -1; pointer-events: none; }

        header {
            position: fixed; top: 0; width: 100%; z-index: 1000;
            padding: 20px; display: flex; justify-content: space-between; align-items: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
            backdrop-filter: blur(10px);
        }
        .logo { font-size: 24px; font-weight: 800; color: var(--red); text-shadow: var(--neon); }

        /* --- CONTINUE WATCHING (KALDIƒûIN YERDEN) --- */
        #continue-row { display: none; padding: 100px 5% 0; }
        .continue-card { 
            background: var(--surface); padding: 15px; border-radius: 15px;
            display: flex; align-items: center; gap: 15px; border: 1px solid rgba(255,255,255,0.1);
            animation: slideIn 0.5s ease;
        }

        /* --- HERO --- */
        .hero {
            height: 70vh; width: 100%; position: relative;
            display: flex; align-items: flex-end; padding: 40px 5%;
            background: url('https://image.tmdb.org/t/p/original/m4Jm2unRjBkvvCU2Zp2Setp9YmE.jpg') center/cover;
        }
        .hero::after { content: ''; position: absolute; inset: 0; background: linear-gradient(0deg, var(--bg), transparent 60%); }
        .hero-content { position: relative; z-index: 10; }
        .hero-title { font-size: 3rem; font-weight: 800; margin: 0; letter-spacing: -2px; }

        /* --- GRID & CARDS --- */
        .section { padding: 30px 0 0 5%; }
        .section-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 15px; opacity: 0.8; }
        
        .slider { display: flex; overflow-x: auto; gap: 15px; padding-bottom: 20px; scrollbar-width: none; }
        .slider::-webkit-scrollbar { display: none; }

        .card {
            flex: 0 0 auto; width: 130px; border-radius: 12px; overflow: hidden;
            transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card:active { transform: scale(0.9); }
        .card img { width: 100%; height: 190px; object-fit: cover; border-radius: 12px; }

        /* --- PLAYER MODAL --- */
        #player-modal { position: fixed; inset: 0; background: #000; z-index: 9999; display: none; }
        .close-btn { position: absolute; top: 30px; left: 20px; z-index: 10000; font-size: 24px; color: #fff; cursor: pointer; background: rgba(0,0,0,0.5); padding: 10px; border-radius: 50%; }
        iframe { width: 100%; height: 100%; border: none; }

        /* --- NAV BAR --- */
        .nav {
            position: fixed; bottom: 20px; left: 5%; width: 90%; 
            background: rgba(15,15,15,0.8); backdrop-filter: blur(20px);
            display: flex; justify-content: space-around; padding: 15px;
            border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); z-index: 1000;
        }
        .nav-item { color: #555; text-decoration: none; font-size: 12px; font-weight: 600; display: flex; flex-direction: column; align-items: center; }
        .nav-item.active { color: var(--red); }
        .nav-icon { font-size: 20px; margin-bottom: 4px; }

        @keyframes slideIn { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body>

<div class="glow-orb" style="top: -100px; left: -100px;"></div>
<div class="glow-orb" style="bottom: 0; right: -100px; background: radial-gradient(circle, rgba(0,0,255,0.05) 0%, transparent 70%);"></div>

<header>
    <div class="logo">HNFAK</div>
    <div id="user-status" style="font-size: 10px; opacity: 0.5;">PREMIUM ACTIVE</div>
</header>

<div id="app">
    <div id="continue-row">
        <div class="section-title">ƒ∞zlemeye Devam Et</div>
        <div id="continue-card-body"></div>
    </div>

    <div id="home-view">
        <div class="hero">
            <div class="hero-content">
                <h1 class="hero-title">Deadpool 3</h1>
                <button onclick="play('movie', 'tt6263850', 'Deadpool 3')" style="background: #fff; color: #000; border: none; padding: 15px 30px; border-radius: 10px; font-weight: 800; margin-top: 20px;">‚ñ∂ ≈ûƒ∞MDƒ∞ ƒ∞ZLE</button>
            </div>
        </div>
        <div id="dynamic-content"></div>
    </div>
</div>

<div id="player-modal">
    <div class="close-btn" onclick="closePlayer()">‚úï</div>
    <iframe id="video-frame" src="" allowfullscreen allow="autoplay"></iframe>
</div>

<nav class="nav">
    <a href="javascript:void(0)" onclick="render('home')" class="nav-item active"><span class="nav-icon">üè†</span>Ana Sayfa</a>
    <a href="javascript:void(0)" onclick="render('movies')" class="nav-item"><span class="nav-icon">üé¨</span>Filmler</a>
    <a href="javascript:void(0)" onclick="render('series')" class="nav-item"><span class="nav-icon">üì∫</span>Diziler</a>
</nav>

<script>
    // --- DATABASE ---
    const db = [
        { id: "tt31046101", t: "Primate", c: "trend", i: "29SBy9p2A963Tia8pP2S0Y6v8p6", ty: "movie" },
        { id: "tt6263850", t: "Deadpool", c: "trend", i: "8cdWjvZQUmOZabaBSEm6768v6NG", ty: "movie" },
        { id: "tt11389872", t: "Kingdom of Apes", c: "trend", i: "gKkl37HQuKTSkA6Y3XpxlYpRw33", ty: "movie" },
        { id: "tt15239678", t: "Dune 2", c: "aksiyon", i: "pWy85e9Q3Z4r9tD4T3S1g5f4q5A", ty: "movie" },
        { id: "tt3556926", t: "TLOU", c: "dizi", i: "uKvVjHNqBPlVZjZSThO2F68Ck86", ty: "tv" },
        { id: "tt12637874", t: "Fallout", c: "dizi", i: "hUu9bTwhA7V13X6c12U533JkHhF", ty: "tv" },
        { id: "tt0944947", t: "GOT", c: "dizi", i: "1XS1oqL89opfnbGw83trZrcr5H", ty: "tv" },
        { id: "tt11198330", t: "House of Dragon", c: "dizi", i: "1X4h40nqsUAUSyUBsWLoCfjj89", ty: "tv" },
        { id: "tt10366206", t: "John Wick 4", c: "aksiyon", i: "vZloFAK7NmvMGKE7VkF5UHaz0I", ty: "movie" },
        { id: "tt22022452", t: "Inside Out 2", c: "cocuk", i: "vpnVM9B6NMmQpWeZvzLvDESb2QY", ty: "movie" }
    ];

    const cats = [
        { id: 'trend', n: 'Haftanƒ±n En ƒ∞yileri' },
        { id: 'aksiyon', n: 'Aksiyon Severler ƒ∞√ßin' },
        { id: 'dizi', n: 'Pop√ºler Diziler' }
    ];

    function init() {
        // Kategorileri olu≈ütur
        const container = document.getElementById('dynamic-content');
        cats.forEach(cat => {
            const items = db.filter(x => x.c === cat.id);
            let html = `<div class="section"><div class="section-title">${cat.n}</div><div class="slider">`;
            items.forEach(item => {
                html += `<div class="card" onclick="play('${item.ty}', '${item.id}', '${item.t}')">
                    <img src="https://image.tmdb.org/t/p/w300/${item.i}.jpg" loading="lazy">
                </div>`;
            });
            html += `</div></div>`;
            container.innerHTML += html;
        });
        checkHistory();
    }

    // --- KALDIƒûIN YERDEN DEVAM ETME MANTIƒûI ---
    function play(type, id, title) {
        const lastWatch = { type, id, title, time: Date.now() };
        localStorage.setItem('hnfak_last_watch', JSON.stringify(lastWatch));
        
        const modal = document.getElementById('player-modal');
        const frame = document.getElementById('video-frame');
        
        // vidsrc.pro hem dublaj hem altyazƒ± otomatik ekler
        frame.src = `https://vidsrc.pro/embed/${type}/${id}`;
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
    }

    function closePlayer() {
        document.getElementById('player-modal').style.display = 'none';
        document.getElementById('video-frame').src = '';
        document.body.style.overflow = 'auto';
        checkHistory();
    }

    function checkHistory() {
        const last = JSON.parse(localStorage.getItem('hnfak_last_watch'));
        const row = document.getElementById('continue-row');
        const body = document.getElementById('continue-card-body');
        
        if(last) {
            row.style.display = 'block';
            body.innerHTML = `
                <div class="continue-card" onclick="play('${last.type}', '${last.id}', '${last.title}')">
                    <div style="background:var(--red); padding:10px; border-radius:10px;">‚ñ∂</div>
                    <div>
                        <div style="font-size:14px; font-weight:800;">${last.title}</div>
                        <div style="font-size:10px; opacity:0.6;">ƒ∞zlemeye devam et</div>
                    </div>
                </div>`;
        }
    }

    // --- 404 HATASINI √ñNLEYEN RENDER Sƒ∞STEMƒ∞ ---
    function render(view) {
        // Navigasyon aktiflik durumunu deƒüi≈ütir
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        event.currentTarget.classList.add('active');
        
        // Sadece g√∂r√ºn√ºm√º deƒüi≈ütir, sayfayƒ± asla yenileme (404 almazsƒ±n)
        if(view === 'home') {
            document.getElementById('home-view').style.display = 'block';
            window.scrollTo({top: 0, behavior: 'smooth'});
        } else {
            // Diƒüer g√∂r√ºn√ºmler i√ßin basit uyarƒ± veya ge√ßici i√ßerik
            alert("Bu sekme √ßok yakƒ±nda g√ºncellenecek!");
        }
    }

    init();
</script>
</body>
</html>
